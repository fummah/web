{"ast":null,"code":"var _jsxFileName = \"C:\\\\wamp64\\\\www\\\\web\\\\aid\\\\src\\\\routes\\\\components\\\\dataDisplay\\\\Tree\\\\Dragable.js\";\nimport React from \"react\";\nimport { Card, Tree } from \"antd\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst TreeNode = Tree.TreeNode;\nconst x = 3;\nconst y = 2;\nconst z = 1;\nconst gData = [];\nconst generateData = (_level, _preKey, _tns) => {\n  const preKey = _preKey || '0';\n  const tns = _tns || gData;\n  const children = [];\n  for (let i = 0; i < x; i++) {\n    const key = `${preKey}-${i}`;\n    tns.push({\n      title: key,\n      key\n    });\n    if (i < y) {\n      children.push(key);\n    }\n  }\n  if (_level < 0) {\n    return tns;\n  }\n  const level = _level - 1;\n  children.forEach((key, index) => {\n    tns[index].children = [];\n    return generateData(level, key, tns[index].children);\n  });\n};\ngenerateData(z);\nclass Dragable extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      gData,\n      expandedKeys: ['0-0', '0-0-0', '0-0-0-0']\n    };\n    this.onDragEnter = info => {\n      // expandedKeys 需要受控时设置\n      this.setState({\n        expandedKeys: info.expandedKeys\n      });\n    };\n    this.onDrop = info => {\n      const dropKey = info.node.props.eventKey;\n      const dragKey = info.dragNode.props.eventKey;\n      const dropPos = info.node.props.pos.split('-');\n      const dropPosition = info.dropPosition - Number(dropPos[dropPos.length - 1]);\n      // const dragNodesKeys = info.dragNodesKeys;\n      const loop = (data, key, callback) => {\n        data.forEach((item, index, arr) => {\n          if (item.key === key) {\n            return callback(item, index, arr);\n          }\n          if (item.children) {\n            return loop(item.children, key, callback);\n          }\n        });\n      };\n      const data = [...this.state.gData];\n      let dragObj;\n      loop(data, dragKey, (item, index, arr) => {\n        arr.splice(index, 1);\n        dragObj = item;\n      });\n      if (info.dropToGap) {\n        let ar;\n        let i;\n        loop(data, dropKey, (item, index, arr) => {\n          ar = arr;\n          i = index;\n        });\n        if (dropPosition === -1) {\n          ar.splice(i, 0, dragObj);\n        } else {\n          ar.splice(i + 1, 0, dragObj);\n        }\n      } else {\n        loop(data, dropKey, item => {\n          item.children = item.children || [];\n          // where to insert 示例添加到尾部，可以是随意位置\n          item.children.push(dragObj);\n        });\n      }\n      this.setState({\n        gData: data\n      });\n    };\n  }\n  render() {\n    const loop = data => data.map(item => {\n      if (item.children && item.children.length) {\n        return /*#__PURE__*/_jsxDEV(TreeNode, {\n          title: item.key,\n          children: loop(item.children)\n        }, item.key, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 16\n        }, this);\n      }\n      return /*#__PURE__*/_jsxDEV(TreeNode, {\n        title: item.key\n      }, item.key, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 14\n      }, this);\n    });\n    return /*#__PURE__*/_jsxDEV(Card, {\n      title: \"Dragable\",\n      className: \"gx-card\",\n      children: /*#__PURE__*/_jsxDEV(Tree, {\n        className: \"draggable-tree\",\n        defaultExpandedKeys: this.state.expandedKeys,\n        draggable: true,\n        onDragEnter: this.onDragEnter,\n        onDrop: this.onDrop,\n        children: loop(this.state.gData)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }, this);\n  }\n}\nexport default Dragable;","map":{"version":3,"names":["React","Card","Tree","jsxDEV","_jsxDEV","TreeNode","x","y","z","gData","generateData","_level","_preKey","_tns","preKey","tns","children","i","key","push","title","level","forEach","index","Dragable","Component","constructor","args","state","expandedKeys","onDragEnter","info","setState","onDrop","dropKey","node","props","eventKey","dragKey","dragNode","dropPos","pos","split","dropPosition","Number","length","loop","data","callback","item","arr","dragObj","splice","dropToGap","ar","render","map","fileName","_jsxFileName","lineNumber","columnNumber","className","defaultExpandedKeys","draggable"],"sources":["C:/wamp64/www/web/aid/src/routes/components/dataDisplay/Tree/Dragable.js"],"sourcesContent":["import React from \"react\";\r\nimport {Card, Tree} from \"antd\";\r\n\r\nconst TreeNode = Tree.TreeNode;\r\n\r\nconst x = 3;\r\nconst y = 2;\r\nconst z = 1;\r\nconst gData = [];\r\n\r\n\r\nconst generateData = (_level, _preKey, _tns) => {\r\n  const preKey = _preKey || '0';\r\n  const tns = _tns || gData;\r\n\r\n  const children = [];\r\n  for (let i = 0; i < x; i++) {\r\n    const key = `${preKey}-${i}`;\r\n    tns.push({title: key, key});\r\n    if (i < y) {\r\n      children.push(key);\r\n    }\r\n  }\r\n  if (_level < 0) {\r\n    return tns;\r\n  }\r\n  const level = _level - 1;\r\n  children.forEach((key, index) => {\r\n    tns[index].children = [];\r\n    return generateData(level, key, tns[index].children);\r\n  });\r\n};\r\ngenerateData(z);\r\n\r\nclass Dragable extends React.Component {\r\n  state = {\r\n    gData,\r\n    expandedKeys: ['0-0', '0-0-0', '0-0-0-0'],\r\n  };\r\n  onDragEnter = (info) => {\r\n    // expandedKeys 需要受控时设置\r\n    this.setState({\r\n      expandedKeys: info.expandedKeys,\r\n    });\r\n  };\r\n  onDrop = (info) => {\r\n    const dropKey = info.node.props.eventKey;\r\n    const dragKey = info.dragNode.props.eventKey;\r\n    const dropPos = info.node.props.pos.split('-');\r\n    const dropPosition = info.dropPosition - Number(dropPos[dropPos.length - 1]);\r\n    // const dragNodesKeys = info.dragNodesKeys;\r\n    const loop = (data, key, callback) => {\r\n      data.forEach((item, index, arr) => {\r\n        if (item.key === key) {\r\n          return callback(item, index, arr);\r\n        }\r\n        if (item.children) {\r\n          return loop(item.children, key, callback);\r\n        }\r\n      });\r\n    };\r\n    const data = [...this.state.gData];\r\n    let dragObj;\r\n    loop(data, dragKey, (item, index, arr) => {\r\n      arr.splice(index, 1);\r\n      dragObj = item;\r\n    });\r\n    if (info.dropToGap) {\r\n      let ar;\r\n      let i;\r\n      loop(data, dropKey, (item, index, arr) => {\r\n        ar = arr;\r\n        i = index;\r\n      });\r\n      if (dropPosition === -1) {\r\n        ar.splice(i, 0, dragObj);\r\n      } else {\r\n        ar.splice(i + 1, 0, dragObj);\r\n      }\r\n    } else {\r\n      loop(data, dropKey, (item) => {\r\n        item.children = item.children || [];\r\n        // where to insert 示例添加到尾部，可以是随意位置\r\n        item.children.push(dragObj);\r\n      });\r\n    }\r\n    this.setState({\r\n      gData: data,\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const loop = data => data.map((item) => {\r\n      if (item.children && item.children.length) {\r\n        return <TreeNode key={item.key} title={item.key}>{loop(item.children)}</TreeNode>;\r\n      }\r\n      return <TreeNode key={item.key} title={item.key}/>;\r\n    });\r\n    return (\r\n      <Card title=\"Dragable\" className=\"gx-card\">\r\n        <Tree\r\n          className=\"draggable-tree\"\r\n          defaultExpandedKeys={this.state.expandedKeys}\r\n          draggable\r\n          onDragEnter={this.onDragEnter}\r\n          onDrop={this.onDrop}\r\n        >\r\n          {loop(this.state.gData)}\r\n        </Tree>\r\n      </Card>\r\n    );\r\n  }\r\n}\r\n\r\n\r\nexport default Dragable;\r\n"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAAQC,IAAI,EAAEC,IAAI,QAAO,MAAM;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEhC,MAAMC,QAAQ,GAAGH,IAAI,CAACG,QAAQ;AAE9B,MAAMC,CAAC,GAAG,CAAC;AACX,MAAMC,CAAC,GAAG,CAAC;AACX,MAAMC,CAAC,GAAG,CAAC;AACX,MAAMC,KAAK,GAAG,EAAE;AAGhB,MAAMC,YAAY,GAAGA,CAACC,MAAM,EAAEC,OAAO,EAAEC,IAAI,KAAK;EAC9C,MAAMC,MAAM,GAAGF,OAAO,IAAI,GAAG;EAC7B,MAAMG,GAAG,GAAGF,IAAI,IAAIJ,KAAK;EAEzB,MAAMO,QAAQ,GAAG,EAAE;EACnB,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGX,CAAC,EAAEW,CAAC,EAAE,EAAE;IAC1B,MAAMC,GAAG,GAAG,GAAGJ,MAAM,IAAIG,CAAC,EAAE;IAC5BF,GAAG,CAACI,IAAI,CAAC;MAACC,KAAK,EAAEF,GAAG;MAAEA;IAAG,CAAC,CAAC;IAC3B,IAAID,CAAC,GAAGV,CAAC,EAAE;MACTS,QAAQ,CAACG,IAAI,CAACD,GAAG,CAAC;IACpB;EACF;EACA,IAAIP,MAAM,GAAG,CAAC,EAAE;IACd,OAAOI,GAAG;EACZ;EACA,MAAMM,KAAK,GAAGV,MAAM,GAAG,CAAC;EACxBK,QAAQ,CAACM,OAAO,CAAC,CAACJ,GAAG,EAAEK,KAAK,KAAK;IAC/BR,GAAG,CAACQ,KAAK,CAAC,CAACP,QAAQ,GAAG,EAAE;IACxB,OAAON,YAAY,CAACW,KAAK,EAAEH,GAAG,EAAEH,GAAG,CAACQ,KAAK,CAAC,CAACP,QAAQ,CAAC;EACtD,CAAC,CAAC;AACJ,CAAC;AACDN,YAAY,CAACF,CAAC,CAAC;AAEf,MAAMgB,QAAQ,SAASxB,KAAK,CAACyB,SAAS,CAAC;EAAAC,YAAA,GAAAC,IAAA;IAAA,SAAAA,IAAA;IAAA,KACrCC,KAAK,GAAG;MACNnB,KAAK;MACLoB,YAAY,EAAE,CAAC,KAAK,EAAE,OAAO,EAAE,SAAS;IAC1C,CAAC;IAAA,KACDC,WAAW,GAAIC,IAAI,IAAK;MACtB;MACA,IAAI,CAACC,QAAQ,CAAC;QACZH,YAAY,EAAEE,IAAI,CAACF;MACrB,CAAC,CAAC;IACJ,CAAC;IAAA,KACDI,MAAM,GAAIF,IAAI,IAAK;MACjB,MAAMG,OAAO,GAAGH,IAAI,CAACI,IAAI,CAACC,KAAK,CAACC,QAAQ;MACxC,MAAMC,OAAO,GAAGP,IAAI,CAACQ,QAAQ,CAACH,KAAK,CAACC,QAAQ;MAC5C,MAAMG,OAAO,GAAGT,IAAI,CAACI,IAAI,CAACC,KAAK,CAACK,GAAG,CAACC,KAAK,CAAC,GAAG,CAAC;MAC9C,MAAMC,YAAY,GAAGZ,IAAI,CAACY,YAAY,GAAGC,MAAM,CAACJ,OAAO,CAACA,OAAO,CAACK,MAAM,GAAG,CAAC,CAAC,CAAC;MAC5E;MACA,MAAMC,IAAI,GAAGA,CAACC,IAAI,EAAE7B,GAAG,EAAE8B,QAAQ,KAAK;QACpCD,IAAI,CAACzB,OAAO,CAAC,CAAC2B,IAAI,EAAE1B,KAAK,EAAE2B,GAAG,KAAK;UACjC,IAAID,IAAI,CAAC/B,GAAG,KAAKA,GAAG,EAAE;YACpB,OAAO8B,QAAQ,CAACC,IAAI,EAAE1B,KAAK,EAAE2B,GAAG,CAAC;UACnC;UACA,IAAID,IAAI,CAACjC,QAAQ,EAAE;YACjB,OAAO8B,IAAI,CAACG,IAAI,CAACjC,QAAQ,EAAEE,GAAG,EAAE8B,QAAQ,CAAC;UAC3C;QACF,CAAC,CAAC;MACJ,CAAC;MACD,MAAMD,IAAI,GAAG,CAAC,GAAG,IAAI,CAACnB,KAAK,CAACnB,KAAK,CAAC;MAClC,IAAI0C,OAAO;MACXL,IAAI,CAACC,IAAI,EAAET,OAAO,EAAE,CAACW,IAAI,EAAE1B,KAAK,EAAE2B,GAAG,KAAK;QACxCA,GAAG,CAACE,MAAM,CAAC7B,KAAK,EAAE,CAAC,CAAC;QACpB4B,OAAO,GAAGF,IAAI;MAChB,CAAC,CAAC;MACF,IAAIlB,IAAI,CAACsB,SAAS,EAAE;QAClB,IAAIC,EAAE;QACN,IAAIrC,CAAC;QACL6B,IAAI,CAACC,IAAI,EAAEb,OAAO,EAAE,CAACe,IAAI,EAAE1B,KAAK,EAAE2B,GAAG,KAAK;UACxCI,EAAE,GAAGJ,GAAG;UACRjC,CAAC,GAAGM,KAAK;QACX,CAAC,CAAC;QACF,IAAIoB,YAAY,KAAK,CAAC,CAAC,EAAE;UACvBW,EAAE,CAACF,MAAM,CAACnC,CAAC,EAAE,CAAC,EAAEkC,OAAO,CAAC;QAC1B,CAAC,MAAM;UACLG,EAAE,CAACF,MAAM,CAACnC,CAAC,GAAG,CAAC,EAAE,CAAC,EAAEkC,OAAO,CAAC;QAC9B;MACF,CAAC,MAAM;QACLL,IAAI,CAACC,IAAI,EAAEb,OAAO,EAAGe,IAAI,IAAK;UAC5BA,IAAI,CAACjC,QAAQ,GAAGiC,IAAI,CAACjC,QAAQ,IAAI,EAAE;UACnC;UACAiC,IAAI,CAACjC,QAAQ,CAACG,IAAI,CAACgC,OAAO,CAAC;QAC7B,CAAC,CAAC;MACJ;MACA,IAAI,CAACnB,QAAQ,CAAC;QACZvB,KAAK,EAAEsC;MACT,CAAC,CAAC;IACJ,CAAC;EAAA;EAEDQ,MAAMA,CAAA,EAAG;IACP,MAAMT,IAAI,GAAGC,IAAI,IAAIA,IAAI,CAACS,GAAG,CAAEP,IAAI,IAAK;MACtC,IAAIA,IAAI,CAACjC,QAAQ,IAAIiC,IAAI,CAACjC,QAAQ,CAAC6B,MAAM,EAAE;QACzC,oBAAOzC,OAAA,CAACC,QAAQ;UAAgBe,KAAK,EAAE6B,IAAI,CAAC/B,GAAI;UAAAF,QAAA,EAAE8B,IAAI,CAACG,IAAI,CAACjC,QAAQ;QAAC,GAA/CiC,IAAI,CAAC/B,GAAG;UAAAuC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAkD,CAAC;MACnF;MACA,oBAAOxD,OAAA,CAACC,QAAQ;QAAgBe,KAAK,EAAE6B,IAAI,CAAC/B;MAAI,GAA1B+B,IAAI,CAAC/B,GAAG;QAAAuC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAmB,CAAC;IACpD,CAAC,CAAC;IACF,oBACExD,OAAA,CAACH,IAAI;MAACmB,KAAK,EAAC,UAAU;MAACyC,SAAS,EAAC,SAAS;MAAA7C,QAAA,eACxCZ,OAAA,CAACF,IAAI;QACH2D,SAAS,EAAC,gBAAgB;QAC1BC,mBAAmB,EAAE,IAAI,CAAClC,KAAK,CAACC,YAAa;QAC7CkC,SAAS;QACTjC,WAAW,EAAE,IAAI,CAACA,WAAY;QAC9BG,MAAM,EAAE,IAAI,CAACA,MAAO;QAAAjB,QAAA,EAEnB8B,IAAI,CAAC,IAAI,CAAClB,KAAK,CAACnB,KAAK;MAAC;QAAAgD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACnB;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAEX;AACF;AAGA,eAAepC,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module"}