{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\")[\"default\"];\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\")[\"default\"];\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = useFrameState;\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\nvar _raf = _interopRequireDefault(require(\"rc-util/lib/raf\"));\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar React = _react;\nfunction useFrameState(defaultValue) {\n  var _React$useState = React.useState(defaultValue),\n    _React$useState2 = (0, _slicedToArray2[\"default\"])(_React$useState, 2),\n    value = _React$useState2[0],\n    setValue = _React$useState2[1];\n  var frameRef = (0, _react.useRef)(null);\n  var batchRef = (0, _react.useRef)([]);\n  var destroyRef = (0, _react.useRef)(false);\n  React.useEffect(function () {\n    destroyRef.current = false;\n    return function () {\n      destroyRef.current = true;\n      _raf[\"default\"].cancel(frameRef.current);\n      frameRef.current = null;\n    };\n  }, []);\n  function setFrameValue(updater) {\n    if (destroyRef.current) {\n      return;\n    }\n    if (frameRef.current === null) {\n      batchRef.current = [];\n      frameRef.current = (0, _raf[\"default\"])(function () {\n        frameRef.current = null;\n        setValue(function (prevValue) {\n          var current = prevValue;\n          batchRef.current.forEach(function (func) {\n            current = func(current);\n          });\n          return current;\n        });\n      });\n    }\n    batchRef.current.push(updater);\n  }\n  return [value, setFrameValue];\n}","map":null,"metadata":{},"sourceType":"script"}