{"ast":null,"code":"function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\nimport React, { Fragment } from 'react';\nimport connectDynamicWidgets from \"../connectors/connectDynamicWidgets.js\";\nimport { getDisplayName } from \"../core/utils.js\";\nfunction isReactElement(element) {\n  return _typeof(element) === 'object' && element.props;\n}\nfunction getAttribute(element) {\n  if (!isReactElement(element)) {\n    return undefined;\n  }\n  if (element.props.attribute) {\n    return element.props.attribute;\n  }\n  if (Array.isArray(element.props.attributes)) {\n    return element.props.attributes[0];\n  }\n  if (element.props.children) {\n    return getAttribute(React.Children.only(element.props.children));\n  }\n  return undefined;\n}\nfunction DynamicWidgets(_ref) {\n  var children = _ref.children,\n    attributesToRender = _ref.attributesToRender,\n    _ref$fallbackComponen = _ref.fallbackComponent,\n    Fallback = _ref$fallbackComponen === void 0 ? function () {\n      return null;\n    } : _ref$fallbackComponen;\n  var widgets = new Map();\n  React.Children.forEach(children, function (child) {\n    var attribute = getAttribute(child);\n    if (!attribute) {\n      throw new Error(\"Could not find \\\"attribute\\\" prop for \".concat(getDisplayName(child), \".\"));\n    }\n    widgets.set(attribute, child);\n  });\n\n  // on initial render this will be empty, but React InstantSearch keeps\n  // search state for unmounted components in place, so routing works.\n  return /*#__PURE__*/React.createElement(React.Fragment, null, attributesToRender.map(function (attribute) {\n    return /*#__PURE__*/React.createElement(Fragment, {\n      key: attribute\n    }, widgets.get(attribute) || /*#__PURE__*/React.createElement(Fallback, {\n      attribute: attribute\n    }));\n  }));\n}\nexport default connectDynamicWidgets(DynamicWidgets, {\n  $$widgetType: 'ais.dynamicWidgets'\n});","map":null,"metadata":{},"sourceType":"module"}